

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command Line Interface &mdash; BundleWrap 2.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/bundlewrap.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="BundleWrap 2.0.0 documentation" href="index.html"/>
        <link rel="next" title="API" href="api.html"/>
        <link rel="prev" title="Plugins" href="plugins.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html">
        

        
          
          <img src="_static/logo.png" class="logo" />
        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-repository">Create a repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#run-a-command">Run a command</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-bundle">Create a bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-file-template">Create a file template</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#apply-configuration">Apply configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#further-reading">Further reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#using-pip">Using <cite>pip</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-git">From git</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements for managed systems</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="repository.html">Repository reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="nodes.py.html">nodes.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="groups.py.html">groups.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="bundles.html">Bundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="hooks.html">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_item.html">Custom item types</a></li>
<li class="toctree-l2"><a class="reference internal" href="libs.html">Custom code</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugins</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bw-apply"><code class="docutils literal"><span class="pre">bw</span> <span class="pre">apply</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#bw-run"><code class="docutils literal"><span class="pre">bw</span> <span class="pre">run</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#bw-nodes-and-bw-groups"><code class="docutils literal"><span class="pre">bw</span> <span class="pre">nodes</span></code> and <code class="docutils literal"><span class="pre">bw</span> <span class="pre">groups</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#bw-debug"><code class="docutils literal"><span class="pre">bw</span> <span class="pre">debug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#bw-plot"><code class="docutils literal"><span class="pre">bw</span> <span class="pre">plot</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#bw-test"><code class="docutils literal"><span class="pre">bw</span> <span class="pre">test</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_contrib.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dev_contrib.html#submitting-bug-reports">Submitting bug reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_contrib.html#contributing-code">Contributing code</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_contrib.html#help">Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#technical">Technical</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#the-bundlewrap-project">The BundleWrap Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="alternatives.html">Alternatives</a><ul>
<li class="toctree-l2"><a class="reference internal" href="alternatives.html#ansible">Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="alternatives.html#bcfg2">BCFG2</a></li>
<li class="toctree-l2"><a class="reference internal" href="alternatives.html#chef">Chef</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">BundleWrap</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Command Line Interface</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="command-line-interface">
<span id="cli"></span><h1>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>The <strong class="command">bw</strong> utility is BundleWrap&#8217;s command line interface.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This page is not meant as a complete reference. It provides a starting point to explore the various subcommands. If you&#8217;re looking for details, <code class="xref std std-option docutils literal"><span class="pre">--help</span></code> is your friend.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="bw-apply">
<h2><code class="docutils literal"><span class="pre">bw</span> <span class="pre">apply</span></code><a class="headerlink" href="#bw-apply" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> bw apply -i mynode
</pre></div>
</div>
<p>The most important and most used part of BundleWrap, <strong class="command">bw apply</strong> will apply your configuration to a set of <a class="reference internal" href="glossary.html#term-node"><span class="xref std std-term">nodes</span></a>. By default, it operates in a non-interactive mode. When you&#8217;re trying something new or are otherwise unsure of some changes, use the <code class="xref std std-option docutils literal"><span class="pre">-i</span></code> switch to have BundleWrap interactively ask before each change is made.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="bw-run">
<h2><code class="docutils literal"><span class="pre">bw</span> <span class="pre">run</span></code><a class="headerlink" href="#bw-run" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> bw run mygroup <span class="s2">&quot;uname -a&quot;</span>
</pre></div>
</div>
<p>Unsurprisingly, the <code class="docutils literal"><span class="pre">run</span></code> subcommand is used to run commands on nodes.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>As with most commands that accept node names, you can also give a <a class="reference internal" href="glossary.html#term-group"><span class="xref std std-term">group</span></a> name or any combination of node and group names, separated by commas (without spaces, e.g. <code class="docutils literal"><span class="pre">node1,group2,node3</span></code>). A third option is to use a bundle selector like <code class="docutils literal"><span class="pre">bundle:my_bundle</span></code>. It will select all nodes with the named <a class="reference internal" href="glossary.html#term-bundle"><span class="xref std std-term">bundle</span></a>. You can freely mix and match node names, group names, and bundle selectors.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Negation is also possible for bundles and groups. <code class="docutils literal"><span class="pre">!bundle:foo</span></code> will add all nodes without the foo bundle, while <code class="docutils literal"><span class="pre">!group:foo</span></code> will add all nodes that aren&#8217;t in the foo group.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="bw-nodes-and-bw-groups">
<h2><code class="docutils literal"><span class="pre">bw</span> <span class="pre">nodes</span></code> and <code class="docutils literal"><span class="pre">bw</span> <span class="pre">groups</span></code><a class="headerlink" href="#bw-nodes-and-bw-groups" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> bw nodes --hostnames <span class="p">|</span> xargs -n <span class="m">1</span> ping -c 1
</pre></div>
</div>
<p>With these commands you can quickly get a list of all nodes and groups in your <a class="reference internal" href="glossary.html#term-repo"><span class="xref std std-term">repository</span></a>. The example above uses <code class="xref std std-option docutils literal"><span class="pre">--hostnames</span></code> to get a list of all DNS names for your nodes and send a ping to each one.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="bw-debug">
<h2><code class="docutils literal"><span class="pre">bw</span> <span class="pre">debug</span></code><a class="headerlink" href="#bw-debug" title="Permalink to this headline">¶</a></h2>
<div class="highlight-pycon"><div class="highlight"><pre><span class="go">$ bw debug</span>
<span class="go">bundlewrap X.Y.Z interactive repository inspector</span>
<span class="go">&gt; You can access the current repository as &#39;repo&#39;.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="go">121</span>
</pre></div>
</div>
<p>This command will drop you into a Python shell with direct access to BundleWrap&#8217;s <a class="reference internal" href="api.html"><em>API</em></a>. Once you&#8217;re familiar with it, it can be a very powerful tool.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="bw-plot">
<span id="id1"></span><h2><code class="docutils literal"><span class="pre">bw</span> <span class="pre">plot</span></code><a class="headerlink" href="#bw-plot" title="Permalink to this headline">¶</a></h2>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">You&#8217;ll need <a class="reference external" href="http://www.graphviz.org/">Graphviz</a> installed on your machine for this to be useful.</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> bw plot node mynode <span class="p">|</span> dot -Tsvg -omynode.svg
</pre></div>
</div>
<p>You won&#8217;t be using this every day, but it&#8217;s pretty cool. The above command will create an SVG file (you can open these in your browser) that shows the item dependency graph for the given node. You will see bundles as dashed rectangles, static dependencies (defined in BundleWrap itself) in green, auto-generated dependencies (calculated dynamically each time you run <strong class="command">bw apply</strong>) in blue and dependencies you defined yourself in red.</p>
<p>It offers an interesting view into the internal complexities BundleWrap has to deal with when figuring out the order in which your items can be applied to your node.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="bw-test">
<h2><code class="docutils literal"><span class="pre">bw</span> <span class="pre">test</span></code><a class="headerlink" href="#bw-test" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> bw <span class="nb">test</span>
<span class="go">✓ node1:pkg_apt:samba</span>
<span class="go">✘ node1:file:/etc/samba/smb.conf</span>

<span class="go">[...]</span>

<span class="go">+----- traceback from worker ------</span>
<span class="go">|</span>
<span class="go">|  Traceback (most recent call last):</span>
<span class="go">|    File &quot;/Users/trehn/Projects/software/bundlewrap/src/bundlewrap/concurrency.py&quot;, line 78, in _worker_process</span>
<span class="go">|      return_value = target(*msg[&#39;args&#39;], **msg[&#39;kwargs&#39;])</span>
<span class="go">|    File &quot;&lt;string&gt;&quot;, line 378, in test</span>
<span class="go">|  BundleError: file:/etc/samba/smb.conf from bundle &#39;samba&#39; refers to missing file &#39;/path/to/bundlewrap/repo/bundles/samba/files/smb.conf&#39;</span>
<span class="go">|</span>
<span class="go">+----------------------------------</span>
</pre></div>
</div>
<p>This command is meant to be run automatically like a test suite after every commit. It will try to catch any errors in your bundles and file templates by initializing every item for every node (but without touching the network).</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plugins.html" class="btn btn-neutral" title="Plugins" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>